
[Vessel]
MovingSpeed     = (800, 800) # (1200, 1200) ; this is overriden by the debug config
Group           = Player
Pivot           = center
Graphic         = VesselGraphic
Body            = VesselBody
ChildList       = Vacuum
Scale           = 2
ShapesImpulseMultiplier = 2000
OnCreate        = > Object.GetID ^, Set Runtime Vessel <

  [VesselGraphic]
  Texture         = vessel.png

  [VesselCompass]
  Group           = Compass
  Graphic         = @
  Texture         = vessel_compass.png
  Pivot           = bottom
  FXList          = VesselCompassFX

    [VesselCompassFX]
    SlotList        = @
    Curve           = sine
    Type            = scale
    EndValue        = (1.2, 1.2)
    EndTime         = 0.7
    Loop            = true

  [VesselBody]
  AllowMoving   = false
  Dynamic       = false
  PartList      = VesselBodyPart

    [VesselBodyPart]
    Type            = sphere
    SelfFlags       = vessel
    CheckMask       = shape # starbase # starbase_shield_phantom
    Solid           = true

    [VesselMovingStartTrack]
    0               = Object.AddSound ^ Sound_MovingStart

    [VesselMovingStopTrack]
    0               = Object.RemoveSound ^ Sound_MovingStart

[Vacuum]
Group           = Player
Graphic         = @
Texture         = pixel
Alpha           = 0
Size            = (70, 500)
Pivot           = top
RotationSpeed   = 8
ChildList       = VacuumHead
OnCreate        = Set Runtime Vacuum ^

[VacuumHead]
AnimationSet      = VacuumAnimSet
Group             = PlayerTop
Pivot             = top
Position          = (0, 70)
Body              = VacuumHeadBody
ChildList         = VacuumHeadFireSpawnPoint
WaitForFire       = 0.12
FireSpeed         = 6000

    [VacuumHeadFireSpawnPoint]
    Pivot          = top
    Position       = (0, 20)

    [VacuumFireShapeTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_FireShape 

    [VacuumFireShapeShootingBlankTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_FireBlank 

  [VacuumHeadBody]
  FixedRotation   = true
  Dynamic         = false
  AllowMoving     = false
  PartList        = VaccumHeadBodyPart

    [VaccumHeadBodyPart]
    Type            = sphere
    Radius          = 40
    Center          = (0, 80)
    SelfFlags       = vacuumhead
    CheckMask       = shape
  
  [VacuumAnimSet]
  Pivot           = top
  Prefix        = Vacuum
  KeyDuration   = 1
  StartAnim     = Inactive
  Inactive      = # 0
  Active        = # 0
  Inactive->    = Inactive # .Active
  Active->      = Active # +.Inactive

    [VacuumInactive1]
    Texture       = vacuum_head_idle.png

    [VacuumActive1]
    Texture       = vacuum_head_active.png

    [VacuumBlowShapeTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_BlowShape 

        [VacuumBlowFX]
        SlotList        = @
        Type            = scale
        Curve           = sine
        EndTime         = 0.15
        EndValue        = (1.25, 1.25)

    [VacuumBeamIsLockedTrack]
    0              = Object.AddFX ^ VacuumLockFX, Object.AddSound ^ Sound_VacuumLocked, Object.Create VacuumIsLockedMessage

        [VacuumLockFX]
        SlotList        = @
        Type            = rotation
        Curve           = sine
        EndTime         = 0.15
        EndValue        = 10

[VacuumBeam]
Group           = Player
Pivot           = top
Size            = (70, 600)
Position        = (0, 80)
Strength        = 50000
DistanceMult    = 6
Body            = VacuumBeamBody
ChildList       = VacuumGraphic 
SoundList       = Sound_VacuumBeam

  [VacuumGraphic]
  Group         = Beam
  Pivot         = top
  Scale         = (2, 6)
  Position      = (0, 15)
  Graphic       = @
  Texture       = vacuum_beam.png
  FXList        = VaccumBeamWoobleFXScaleX # VaccumBeamWoobleFXScaleY

    [VaccumBeamWoobleFXScaleX]
    SlotList        = @
    Loop            = true
    Type            = scale
    Curve           = sine
    EndTime         = 0.15
    EndValue        = (0.85, 1.0)

    [VaccumBeamWoobleFXScaleY]
    SlotList        = @
    Loop            = true
    Type            = scale
    Curve           = sine
    EndTime         = 0.75
    EndValue        = (1.0, 1.01)

  [VacuumBeamBody]
  FixedRotation   = true
  Dynamic         = false
  AllowMoving     = false
  PartList        = VacuumBeamBodyPartBeam # VacuumBeamBodyPartBase

    [VacuumBeamBodyPartBeam]
    Type                            = mesh
    VertexList                      = (-30, 15) # (30, 15) # (70, 615) # (-70, 615)
    SelfFlags                       = vacuum
    CheckMask                       = shape

    [VacuumBeamBodyPartBase]
    Type                            = sphere
    Center                          = (0, 30)
    Radius                          = 90
    SelfFlags                       = vacuum
    CheckMask                       = shape

[Shape]
Group           = Shapes
Graphic         = @
Scale           = 3
Pivot           = center
Body            = ShapeBody
OnDelete        = > Object.GetPosition ^, > Object.Create DeadShape, Object.SetPosition < <

    [DeadShape] ; This is where you put the pickup FX and all
    Group           = Shapes
    LifeTime        = 0

  [ShapeBody]
  LinearDamping   = 1.5
  AngularDamping  = 0.9
  PartList        = ShapeBodyPart
  Dynamic         = true
  AllowMoving     = true
  HighSpeed       = true

    [ShapeBodyPart]
    Type                            = sphere
    SelfFlags                       = shape
    CheckMask                       = vacuum # vacuumhead # vessel # starbase_shield
    Solid                           = true
    Friction                        = 10 ; Valeur de ralentitissement apres un rebond
    Restitution                     = 1.5 ; Valeur de bounce

[ShapeCollectedFX]

  [ShapeCollectedFXAlpha]
  
  [ShapeCollectedFXScale]

[ShapeTriangle@Shape]
Texture         = triangle_01.png

[ShapeCircle@Shape]
Texture         = star_01.png

[ShapeSquare@Shape]
Texture         = square_01.png

[ShapeDiamond@Shape]
Texture         = diamond_01.png

[Starbase]
Group           = Starbase
Graphic         = @
Scale           = 6
Texture         = @Celestial
TextureSize     = (128, 96)
TextureOrigin   = (256, 0)
Pivot           = center
Body            = StarbaseBody
DockingSpeed    = 5.0
ChildList       = StarbaseDock # StarbaseShield # StarbaseShieldPhantom

  [StarbaseBody]
  AllowMoving   = false
  Dynamic       = true
  PartList      = StarbaseBodyPart

    [StarbaseBodyPart]
    Type            = sphere
    Radius          = 20
    SelfFlags       = starbase
    CheckMask       = vessel

    [StarbaseShield]
    IgnoreFromParent  = scale 
    Graphic           = @
    Texture           = starbase_shield.png
    Scale             = 4
    Pivot             = center
    Body              = @
    Dynamic           = false
    PartList          = StarbaseShieldBodyPart
    Smoothing         = false
    FXList            = ShieldWobble # ShieldBlink # ShieldRotate

                [ShieldWobble]
                SlotList        = @
                Type            = scale
                Curve           = sine
                StartTime       = 0 ~ 0.05
                EndTime         = 0.1 ~ 0.2
                StartValue      = 1
                EndValue        = 1.01 ~ 1.02
                Loop            = true
                DoNotCache      = true

                [ShieldBlink]
                SlotList        = @
                Type            = alpha
                Curve           = sine
                StartTime       = 0 ~ 0.25
                EndTime         = 0.25 ~ 0.45
                EndValue        = -0.45 ~ -0.75
                Loop            = true
                DoNotCache      = true

                [ShieldRotate]
                SlotList        = @
                Type            = rotation
                Curve           = linear
                StartTime       = 0
                EndTime         = 80 ~ 100
                EndValue        = 360
                Loop            = true
                DoNotCache      = true


      [StarbaseShieldBodyPart]
      Type            = sphere
      SelfFlags       = starbase_shield
      CheckMask       = shape
      Solid           = true

    [StarbaseShieldPhantom@StarbaseShield]
    Dynamic           = true
    PartList          = StarbaseShieldPhantomBodyPart
    Alpha             = 0
    Scale             = 3
    
    [StarbaseShieldPhantomBodyPart]
      Type            = sphere
      SelfFlags       = starbase_shield_phantom
      CheckMask       = vessel

    [StarbaseShipDockingTrack]
    0 = log "Ship is docking"

    [StarbaseShipDockedTrack]
    0 = log "Ship is docked", Object.AddSound ^ Sound_ShipDocked

    [StarbaseShipUndockedTrack]
    0 = log "Ship is undocked"

    [StarbaseDock]
    Group           = StarbaseDock
    Graphic         = @
    Texture         = starbase_dock.png
    Pivot           = center
    Position        = (0,0,-0.1)
    IgnoreFromParent= scale 
    Scale           = 3

[Starbases]
ChildList   = StarbaseTriangle # StarbaseSquare # StarbaseDiamond # StarbaseStar

[StarbaseTriangle@Starbase]
Position        = (2000, 1000)

[StarbaseSquare@Starbase]
Position        = (-2000, -2000)

[StarbaseDiamond@Starbase]
Position        = (0, -4400)

[StarbaseStar@Starbase]
Position        = (5468, 19000)