
[Vessel]
MovingSpeed     = (800, 800) # (1200, 1200) ; this is overriden by the debug config
Group           = Player
Pivot           = center
Graphic         = VesselGraphic
Body            = VesselBody
ChildList       = Vacuum # VesselShieldPhantom # GameOnMessage
Scale           = 2
FXList          = VesselAppearFX
TrackList       = VesselAppearTrack
ShapesImpulseMultiplier = 2000
OnCreate        = > Object.GetID ^, Set Runtime Vessel <

    [VesselAppearTrack]
    0.1         = Object.AddSound ^ Sound_ShipAppear

    [VesselAppearFX]
    SlotList        = VesselAppearFXAlpha # VesselAppearFXScale
        
        [VesselAppearFXAlpha]
        EndTime         = 0.2
        Type            = alpha
        Curve           = smooth
        Absolute        = true
        StartValue      = 0
        EndValue        = 1

        [VesselAppearFXScale]
        StartTime       = 0.1
        EndTime         = 0.3
        Type            = scale
        Curve           = sine
        EndValue        = 1.2

    [VesselShieldPhantom]
    Pivot             = center
    IgnoreFromParent  = scale 
    Body              = @
    Dynamic           = false
    PartList          = @
    Type              = sphere
    Radius            = 1000
    Type              = sphere
    SelfFlags         = starbase_shield
    CheckMask         = shape
    Solid             = true
    LifeTime          = 0.1

  [VesselGraphic]
  Texture         = vessel.png

  [VesselCompass]
  Group           = Compass
  Graphic         = @
  Texture         = vessel_compass.png
  Pivot           = bottom
  FXList          = VesselCompassFX

    [VesselCompassFX]
    SlotList        = @
    Curve           = sine
    Type            = scale
    EndValue        = (1.2, 1.2)
    EndTime         = 0.7
    Loop            = true

  [VesselBody]
  AllowMoving   = false
  Dynamic       = false
  PartList      = VesselBodyPart

    [VesselBodyPart]
    Type            = sphere
    SelfFlags       = vessel
    CheckMask       = shape # starbase # starbase_shield_phantom
    Solid           = true

    [VesselMovingStartTrack]
    0               = Object.AddSound ^ Sound_MovingStart

    [VesselMovingStopTrack]
    0               = Object.RemoveSound ^ Sound_MovingStart

    [VesselDamageBlowTrack]
    0               = Object.AddFX ^ VesselDamageFX, Object.AddSound ^ Sound_BlowShapeNegative

    [VesselDamageBounceTrack]
    0               = Object.AddFX ^ VesselDamageFX, Object.AddSound ^ Sound_BounceFromShipNegative
    
      [VesselDamageFX]
      SlotList      = @
      Loop          = false
      DoNotCache    = true
      Type          = Color
      Absolute      = true
      StartValue    = red
      EndValue      = white
      EndTime       = 0.2

[Vacuum]
Group           = Player
Graphic         = @
Texture         = pixel
Alpha           = 0
Size            = (70, 500)
Pivot           = top
RotationSpeed   = 8
ChildList       = VacuumHead
OnCreate        = Set Runtime Vacuum ^

[VacuumHead]
AnimationSet      = VacuumAnimSet
Group             = PlayerTop
Pivot             = top
Position          = (0, 70)
Body              = VacuumHeadBody
ChildList         = VacuumHeadFireSpawnPoint
WaitForFire       = 0.12
FireSpeed         = 6000

    [VacuumHeadFireSpawnPoint]
    Pivot          = top
    Position       = (0, 20)

    [VacuumFireShapeTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_FireShape 

    [VacuumFireShapeShootingBlankTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_FireBlank 

  [VacuumHeadBody]
  FixedRotation   = true
  Dynamic         = false
  AllowMoving     = false
  PartList        = VaccumHeadBodyPart

    [VaccumHeadBodyPart]
    Type            = sphere
    Radius          = 40
    Center          = (0, 80)
    SelfFlags       = vacuumhead
    CheckMask       = shape
  
  [VacuumAnimSet]
  Pivot           = top
  Prefix        = Vacuum
  KeyDuration   = 1
  StartAnim     = Inactive
  Inactive      = # 0
  Active        = # 0
  Inactive->    = Inactive # .Active
  Active->      = Active # +.Inactive

    [VacuumInactive1]
    Texture       = vacuum_head_idle.png

    [VacuumActive1]
    Texture       = vacuum_head_active.png

    [VacuumBlowShapeTrack]
    0               = Object.AddFX ^ VacuumBlowFX, Object.AddSound ^ Sound_BlowShape 

        [VacuumBlowFX]
        SlotList        = @
        Type            = scale
        Curve           = sine
        EndTime         = 0.15
        EndValue        = (1.25, 1.25)

    [VacuumBeamIsLockedTrack]
    0              = Object.AddFX ^ VacuumLockFX, Object.AddSound ^ Sound_VacuumLocked, Object.Create VacuumIsLockedMessage

        [VacuumLockFX]
        SlotList        = @
        Type            = rotation
        Curve           = sine
        EndTime         = 0.15
        EndValue        = 10

[VacuumBeam]
Group           = Player
Pivot           = top
Size            = (70, 600)
Position        = (0, 80)
Strength        = 50000
DistanceMult    = 6
StrengthMultiplierNegativeShapes = 0.7
Body            = VacuumBeamBody
ChildList       = VacuumGraphic 
SoundList       = Sound_VacuumBeam

  [VacuumGraphic]
  Group         = Beam
  Pivot         = top
  Scale         = (2, 6)
  Position      = (0, 15)
  Graphic       = @
  Texture       = vacuum_beam.png
  FXList        = VaccumBeamWoobleFXScaleX # VaccumBeamWoobleFXScaleY

    [VaccumBeamWoobleFXScaleX]
    SlotList        = @
    Loop            = true
    Type            = scale
    Curve           = sine
    EndTime         = 0.15
    EndValue        = (0.85, 1.0)

    [VaccumBeamWoobleFXScaleY]
    SlotList        = @
    Loop            = true
    Type            = scale
    Curve           = sine
    EndTime         = 0.75
    EndValue        = (1.0, 1.01)

  [VacuumBeamBody]
  FixedRotation   = true
  Dynamic         = false
  AllowMoving     = false
  PartList        = VacuumBeamBodyPartBeam # VacuumBeamBodyPartBase

    [VacuumBeamBodyPartBeam]
    Type                            = mesh
    VertexList                      = (-30, 15) # (30, 15) # (70, 615) # (-70, 615)
    SelfFlags                       = vacuum
    CheckMask                       = shape

    [VacuumBeamBodyPartBase]
    Type                            = sphere
    Center                          = (0, 30)
    Radius                          = 90
    SelfFlags                       = vacuum
    CheckMask                       = shape

[Shape]
Group           = Shapes
Graphic         = @
Scale           = 3
Pivot           = center
Body            = ShapeBody
DamageBlow      = 0
DamageBounce    = 0

  [ShapeBody]
  LinearDamping   = 1.5
  PartList        = ShapeBodyPart
  Dynamic         = true
  AllowMoving     = true
  HighSpeed       = true

    [ShapeBodyPart]
    Type                            = sphere
    SelfFlags                       = shape
    CheckMask                       = vacuum # vacuumhead # vessel # starbase_shield
    Solid                           = true
    Friction                        = 10 ; Valeur de ralentitissement apres un rebond
    Restitution                     = 1.5 ; Valeur de bounce

[NegativeShape@Shape]
Color           = red
Scale           = 4
Body            = NegativeShapeBody
DamageBlow      = 10
DamageBounce    = 15

  [NegativeShapeBody@ShapeBody]
  LinearDamping   = 5.0
  PartList        = NegativeShapeBodyPart

    [NegativeShapeBodyPart@ShapeBodyPart]
    Friction                        = 10 ; Valeur de ralentitissement apres un rebond
    Restitution                     = 0.5 ; Valeur de bounce

  [NegativeShapeCollisionTrack]
  0 = Object.AddFX ^ NegativeShapeCollisionFX , Object.SetLifeTime ^ fx

    [NegativeShapeCollisionFX]
    SlotList        = NegativeShapeCollisionFXFadeOut # NegativeShapeCollisionFXScale

        [NegativeShapeCollisionFXFadeOut]
        Curve       = smooth
        Type        = alpha
        EndValue    = -1
        EndTime     = 0.2

        [NegativeShapeCollisionFXScale]
        Curve       = smooth
        Type        = scale
        EndValue    = 1.2
        EndTime     = 0.2

[ShapeCollectedFX]

  [ShapeCollectedFXAlpha]
  
  [ShapeCollectedFXScale]

[ShapeTriangle@Shape]
Texture         = triangle_01.png

[ShapeTriangleNegative@NegativeShape]
Texture         = triangle_01.png

[ShapeCircle@Shape]
Texture         = star_01.png

[ShapeCircleNegative@NegativeShape]
Texture         = star_01.png

[ShapeSquare@Shape]
Texture         = square_01.png

[ShapeSquareNegative@NegativeShape]
Texture         = square_01.png

[ShapeDiamond@Shape]
Texture         = diamond_01.png

[ShapeDiamondNegative@NegativeShape]
Texture         = diamond_01.png

[Starbase]
Group           = Starbase
Graphic         = @
Scale           = 6
Texture         = @Celestial
TextureSize     = (128, 96)
TextureOrigin   = (256, 0)
Pivot           = center
Body            = StarbaseBody
DockingSpeed    = 5.0
ChildList       = StarbaseDock # StarbaseShield # StarbaseShieldPhantom

  [StarbaseBody]
  AllowMoving   = false
  Dynamic       = true
  PartList      = StarbaseBodyPart

    [StarbaseBodyPart]
    Type            = sphere
    Radius          = 20
    SelfFlags       = starbase
    CheckMask       = vessel

    [StarbaseShield]
    IgnoreFromParent  = scale 
    Graphic           = @
    Texture           = starbase_shield.png
    Scale             = 12
    Pivot             = center
    Body              = @
    Dynamic           = false
    PartList          = StarbaseShieldBodyPart

      [StarbaseShieldBodyPart]
      Type            = sphere
      SelfFlags       = starbase_shield
      CheckMask       = shape
      Solid           = true

    [StarbaseShieldPhantom@StarbaseShield]
    Dynamic           = true
    PartList          = StarbaseShieldPhantomBodyPart
    Alpha             = 0
    Scale             = 10
    
    [StarbaseShieldPhantomBodyPart]
      Type            = sphere
      SelfFlags       = starbase_shield_phantom
      CheckMask       = vessel

    [StarbaseShipDockingTrack]
    0 = log "Ship is docking"

    [StarbaseShipDockedTrack]
    0 = log "Ship is docked", Object.AddSound ^ Sound_ShipDocked

    [StarbaseShipUndockedTrack]
    0 = log "Ship is undocked"

    [StarbaseDock]
    Group           = StarbaseDock
    Graphic         = @
    Texture         = starbase_dock.png
    Pivot           = center
    Position        = (0,0,-0.1)
    IgnoreFromParent= scale 
    Scale           = 3

[Starbases]
ChildList   = StarbaseTriangle # StarbaseSquare # StarbaseDiamond # StarbaseStar

[StarbaseTriangle@Starbase]
Position        = (2000, 1000)

[StarbaseSquare@Starbase]
Position        = (-2000, -2000)

[StarbaseDiamond@Starbase]
Position        = (0, -4400)

[StarbaseStar@Starbase]
Position        = (5468, 19000)